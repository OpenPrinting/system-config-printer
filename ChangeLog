2007-01-08  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Printer.getPPDDrivers): Removed some dead code.

	* cupshelpers.py (setPPDPageSize): New function.
	* system-config-printer.py (GUI.on_btnNPApply_clicked): Use it
	for user-provided PPD.
	(GUI.on_btnNPApply_clicked): Use it for new printers (bug
	#221702).

	* configure.in (ALL_LINGUAS): Added ro.

2007-01-03  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.45.

2007-01-03  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.checkDriverExists): Fixed
	traceback.

2007-01-02  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.44.

2007-01-02  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Foomatic.getPrinterFromDeviceID): Preserve case in
	model string when dumping debug output.

2006-12-28  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.get_PPD_but_handle_errors): Fixed
	traceback in error display.

2006-12-21  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.43.

2006-12-21  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.checkDriverExists): Stop checking
	for binaries if we already discovered one missing (bug #220347).
	(GUI.on_btnNPApply_clicked.get_PPD_but_handle_errors): Distinguish
	between PPD and Foomatic errors, and for PPD errors show the
	output of the cupstestppd command to help pinpoint the
	problem (bug #220136).

2006-12-15  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_btnApply_clicked): Use
	nonfatalException() if exception caught.

2006-12-14  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (nonfatalException): New function.
	(GUI.on_tvNPDevices_cursor_changed): Use it when trying to
	auto-match printer model.

	* foomatic.py (Foomatic.getPrinterFromDeviceID): New function.
	(Foomatic.getPrinterFromCupsDevice): Use it.
	(Foomatic.getPPD): Likewise (bug #219518).

2006-12-12  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Foomatic.getPrinterFromCupsDevice): Don't check
	against DES field at all; if the make and model strings don't
	match, the description field isn't helpful.  Example: '6543' which
	is the same between two unrelated devices.

	* Makefile.am: New target missing-languages.

2006-12-11  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.42.

2006-12-11  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Foomatic.getPrinterFromCommandSet): Fixed typo.
	(Foomatic.getPrinterFromCupsDevice): Case-insensitive matching
	when Device ID not known to database.

	* configure.in (ALL_LINGUAS): Added mr.

2006-12-07  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.41.

2006-12-01  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_about_activate): hpfax backend
	should set empty/description tab.
	(GUI.on_tvNPDevices_cursor_changed): Set description label to
	reflect backend type.

	* system-config-printer.glade: Added label to describe devices
	with no optional parameters.

2006-11-30  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (Printer.setEnabled): Optional 'reason'
	argument.
	(Printer.setAccepting): Likewise.

	* system-config-printer.glade: Centre Connecting dialog on
	parent.
	* system-config-printer.py (GUI.on_connect_activate): Set
	Connecting dialog transient for main window.
	(GUI.reconnect): Provoke libcups into reconnecting.
	(GUI.populateList): Keep Server Settings selected if it was before.

2006-11-28  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.setNPButtons): Set Forward button
	sensitive on Device screen in new-printer dialog (bug #217515).
	(GUI.on_tvNPDevices_cursor_changed): Don't pre-select make and
	model when not discoverable for chosen device (bug #217518).
	(GUI.show_HTTP_Error): Fixed typo (bug #217537).
	(GUI.on_btnPMakeDefault_clicked): If the system-wide lpoptions
	file sets a default printer that conflicts with the new server
	default, alter lpoptions so that it no longer overrides
	it (bug	#217395).
	(GUI.show_HTTP_Error): Describe cups.HTTPError -1 as 'not
	connected'.
	(GUI.reconnect): Implemented.
	(GUI.apply): Reconnect after applying server settings.

2006-11-27  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.40.

2006-11-24  Tim Waugh  <twaugh@redhat.com>

	* configure.in (ALL_LINGUAS): Added lv and si.

2006-11-23  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Don't set button widths in
	new-printer dialog (bug #217025).

2006-11-21  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Removed username:password from
	hint string because we add that in afterwards.

2006-11-21  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.39.

2006-11-21  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Added SMB hint label on device
	screen (bug #212759).

2006-11-15  Tim Waugh  <twaugh@redhat.com>

	* configure.in (ALL_LINGUAS): Updated.

2006-11-14  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Make PPD NickName selectable.

	* system-config-printer.py (GUI.on_btnChangePPD_clicked): Busy
	cursor while loading foomatic and PPD list (bug #215527).
	(GUI.on_btnSelectDevice_clicked): Busy cursor while loading
	foomatic and device list (bug #215527).

2006-11-14  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.38.

2006-11-14  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.pathcheck): Fixed indentation so
	that IJS servers are checked to be in the path.

	* foomatic.py (Foomatic.addCupsPPDs): Fixed traceback in
	'ppd-device-id' parsing code.

2006-11-13  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.37.

2006-11-11  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_btnPrintTestPage_clicked): IPP
	Error dialog for any cancelling errors.

2006-11-10  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.setTestButton): New function for
	allowing user to cancel test jobs if there are some.
	(GUI.fillPrinterTab): Use it.
	(GUI.on_btnPrintTestPage_clicked): Cancel jobs if cancelling (bug
	#215054).

	* cupshelpers.py (Printer.testsQueued): New method for finding out
	if test pages are queued.
	(Printer.cancelJobs): New method for cancelling jobs.

2006-11-10  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.36.

2006-11-10  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Foomatic.addCupsPPDs): No need to remove foomatic
	PPDs now; this is handled in foomatic.

2006-11-09  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (parseDeviceID): New function.
	(Device.__init__): Use it.
	* foomatic.py (Foomatic._add_printer): Likewise.
	(Foomatic.addCupsPPDs): Parse IEEE 1284 Device IDs from CUPS PPDs
	and add them to the make/model look-up dictionary.
	(Foomatic._add_printer): Don't add empty fields to the look-up
	dictionary.
	(Foomatic.getPrinterFromCupsDevice): Fixed typo.
	(Foomatic.getPrinterFromCommandSet): New function.
	(Foomatic.getPPD): Use it.
	(Foomatic.getPrinterFromCupsDevice): Match against command sets.

	* foomatic.py (Foomatic.getPPD): Convert command sets to lower
	case for comparison.
	(Foomatic.getPPD): Match PCL6, PCL5e, PCL5c, ESCPL2 command sets.

	* foomatic.py (Foomatic._add_printer): Parse
	'autodetect/*/ieee1284' entries (bug #214761).

2006-11-08 Florian Festi  <ffesti@redhat.com>

	* foomatic.py (Foomatic.getPPD): now matches against 
	commandset (bug #214181), removed debug code and
	code commented out

	* cupshelpers.py: removed code commented out

2006-11-07  Tim Waugh  <twaugh@redhat.com>

	* configure.in: 0.7.35.

2006-11-07  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.fillModelList): Reset scroll.
	(GUI.fillMakeList): Likewise.
	(GUI.fillDriverList): Scroll to pre-selected driver.

	* foomatic.py (Foomatic.getPrinterFromCupsDevice): Handle bogus
	HPLIP Device IDs (bug #214434).

	* system-config-printer.py (GUI.pathcheck): Support absolute paths
	in foomatic command line.
	(GUI.pathcheck): Fixed typo.
	(GUI.on_tvNPDrivers_cursor_changed): Better PPD information
	display (bug #214365).

	* foomatic.py (_ppdMakeModelSplit): Merge CUPS and foomatic
	manufacturers when they differ in case.

	* system-config-printer.py (GUI.on_btnNPApply_clicked): Handle
	missing driver XML for drivers like Gutenprint.

	* system-config-printer.py (GUI.checkDriverExists): Check for
	'*cupsFilter' lines and verify filters are installed (bug
	#212139).

	* foomatic.py (_ppdMakeModelSplit):  Better display for models
	driven by Gimp-Print PPDs (bug #213862).

2006-11-06  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.34.

2006-11-06  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Foomatic.getPPD): Only match against description
	when it is valid (bug #206907).

	* cupshelpers.py (PrintersConf.parse): Handle invalid printers.conf
	file gracefully (bug #214134).

2006-11-04  Tim Waugh  <twaugh@redhat.com>

	* optionwidgets.py (OptionBool.__init__): Handle Boolean values
	with "On" and "Off" as choices (bug #213136).

	* system-config-printer.py (GUI.on_btnNPApply_clicked): Handle
	database errors gracefully (bug #213992).
	(GUI.on_btnNPApply_clicked): Only translate the strings once.

2006-11-03  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (_ppdMakeModelSplit): "EPSON" -> "Epson".

	* system-config-printer.py (GUI.checkDriverExists): Include
	gutenprint driver check.

	* foomatic.py (_ppdMakeModelSplit): Better display for models
	driven by Gutenprint PPDs (bug #213862).

2006-11-02  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.33.

2006-11-02  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.save_printer): Refresh after
	applying changes (bug #213692).

	* system-config-printer.py (GUI.on_btnNPApply_clicked): Set
	PageSize when uploading a new PPD as-is (bug #213680).

	* cupshelpers.py (copyPPDOptions): Skip 'PageRegion' since that's
	special (bug #213680).

	* system-config-printer.py (GUI.on_btnNPApply_clicked): Fix using
	the new PPD as-is (bug #203905).

	* system-config-printer.py (GUI.fillDeviceTab): Sort 'Other' last
	in the devices list (bug #213676).

	* system-config-printer.py (GUI.on_btnChangePPD_clicked): Fix
	auto-selection of current PPD when changing it (bug #213667).

	* optionwidgets.py (OptionPickOne.__init__): Handle enum values
	already set outside the range (bug #213136).

2006-11-01  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.checkDriverExists): New function
	to check that the driver exists.
	(GUI.on_btnNPApply_clicked): Use it (bug #212139).

2006-10-31  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.__init__): Find '.PPD' files as
	well as '.ppd' files (bug #213223).

2006-10-25  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Printer.getPPD): Clean up temporary file.

2006-10-05  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Fix invisible_char in glade
	file (bug #209368).

2006-10-02  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.32.

2006-10-02  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.show_HTTP_Error): New function.
	(GUI.connect): Use it to handle HTTPError (bug #208824).
	(GUI.setConnected): Set 'server settings' widgets insensitive when
	not connected.
	(GUI.on_tvMainList_cursor_changed): Only set widget status when
	connected.
	(GUI.__init__): Handle error on initial connection (bug #208824).

2006-09-29  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.31.

2006-09-29  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py: Fixed automatic selection of recommended
	driver (bug #208606).

	* system-config-printer.glade: Better visibility for printer
	drivers (bug #203907).

2006-09-29  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.30.

2006-09-29  Tim Waugh  <twaugh@redhat.com>

	* Makefile.am: Add a distcheck-hook for update-po.

	* system-config-printer.glade: Don't set width_request on buttons
	that don't need it (bug #208556).

2006-09-29  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.29.

2006-09-29  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (getPrinterFromCupsDevice): Fixed debug message.

	* system-config-printer.py (GUI.__init__): Set glade translation
	domain (bug #206622).

	* po/fr.po: Fixed vertext ('%' -> '%s').

2006-09-26  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.28.

2006-09-26  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Set CATOBJECT to fix bug #206622.

2006-08-30  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.27.

2006-08-30  Tim Waugh  <twaugh@redhat.com>

	Applied patch from Kjartan Maraas:
	* Makefile.am: Use intltool to translate desktop file.
	* bootstrap: Run intltoolize.
	* configure.in: Added intltool hook.
	* system-config-printer.desktop.in: New file.
	* po/POTFILES.in: Translate desktop file.

2006-08-24  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py: Removed special raw printer handling in favour of
	CUPS-provided 'Raw Queue' pseudo-PPD.

	* system-config-printer.py (GUI.on_btnChangePPD_clicked): Prevent
	traceback on raw queue.
	(GUI.on_btnNPApply_clicked): Cope with changing from a PPD-driven
	queue to a raw queue.

2006-08-23  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.26.

2006-08-23  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.fillPrinterTab): Use ellipsis to
	show authentication details are hidden.
	(percentDecode): New function.

2006-08-18  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (percentEncode): New function.
	(GUI.getDeviceURI): Use it (bug #203066).
	(GUI.fillNPApply): When authentication details are hidden in SMB
	URI, show this with an ellipsis.

2006-08-14 Florian Festi  <ffesti@redhat.com>

	* configure.in: Version 0.7.25.
	* cupshelpers.py (Printer.getPPD): fix for raw queues
	* system-config-printer.py (GUI.fillPrinterOptions): don't show 
	  option tabs for raw queues
	* system-config-printer.py (GUI.on_btnNPApply_clicked): fix for 
	  raw queues
2006-08-03  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.24.

2006-08-03  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.getDeviceURI): Fixed IPP URI
	generation.
	(GUI.on_tvNPDevices_cursor_changed): Parse IPP URIs correctly.

2006-07-28  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (Device.__init__): Fixed traceback when handling
	non-conforming Device IDs.

2006-07-24  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.23.

2006-07-24  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.initNewPrinterWindow): Set JetDirect
	port number to 9100 by default (bug #197866).

2006-07-07  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.save_serversettings): Reconnect
	after adjusting server settings.

2006-07-07  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.22.

2006-07-07  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_tvNPDrivers_cursor_changed):
	Fix PPD description for PPDs from the CUPS foomatic driver.

	* foomatic.py (_ppdMakeModelSplit): Handle PPDs from the CUPS
	foomatic driver.

	* cupshelpers.py (PrintersConf.fetch): Handle classes.conf or
	printers.conf being asent.

2006-07-06 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.py (GUI.fillPrinterOptions): Keep 
	"Installable Options" tab focused when Apply button is pressed.
	* system-config-printer.glade: hide "Installable Options" tab to 
	haveit redrawn on the first showall()
	* system-config-printer.py (GUI.on_btnNewOption_clicked, 
	GUI.removeOption_clicked, GUI.on_cmbentNewOption_changed): Don't offer
	options as new that are already set.
	
2006-07-05  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.21.

2006-07-05  Tim Waugh  <twaugh@redhat.com>

	* options.py (OptionSelectOne.__init__): Handle Booleans.
	(Option.is_changed): Compare strings not values.

	* cupshelpers.py (Printer._getAttributes): Fix case in Boolean
	options.

2006-07-05 Florian Festi  <ffesti@redhat.com>

	* cupshelpers.py (Printer._getAttributes, GUI.fillPrinterTab):
	fixed handling of server side settings
	
2006-07-04  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Printer.getPPD): Fix foomatic-provided PPD
	loading.

2006-07-03  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.20.

2006-07-03 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.glade: Spacing (HIG)

2006-07-03 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.py (GUI.populateList): Hide empty entries in
	the main list
		
2006-07-03  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (_ppdMakeModelSplit): Fixed indentation.
	(_ppdMakeModelSplit): Better commented explanations.
	(Foomatic.addCupsPPDs): Don't include foomatic-provided PPDs
	because we already know about them from foomatic.

2006-06-30  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.19.

2006-06-30  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Printer.parse_xml): There's no ppds node.  Handle
	lang/*/ppd.
	(_ppdMakeModelSplit): New function.

	* system-config-printer.py (GUI.on_tvNPDrivers_cursor_changed):
	More reliable PPD information.

	* foomatic.py: Use /var/cache/foomatic/foomatic.pickle for pickle
	file.
	(Foomatic.addCupsPPDs): Strip PS/PXL suffices from CUPS PPD
	nicknames.
	(Foomatic.addCupsPPDs): Add loaded PPD drivers to existing
	printers.
	(Printer.getPPDDrivers): Strip .gz when comparing file names.

2006-06-29  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_delete_activate): Clear any
	un-applied changes.

	* system-config-printer.glade: Make buttons on the new printer dialog
	all the same width.

2006-06-27  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.18.

2006-06-27  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.setDataButtonState): Print Test
	Page button is only sensitive when printer is enabled, accepting
	jobs, and no changes need to be applied.
	(GUI.fillPrinterTab): Likewise.
	(GUI.on_btnPrintTestPage_clicked): Tell the user that the test
	page was submitted, and which job number it was.
	(GUI.on_btnPrintTestPage_clicked): Handle test page failures due
	to the remote printer not being shared.  In theory it should be
	possible to print test pages there, but needs hackery.

2006-06-26 Florian Festi  <ffesti@redhat.com>
	* system-config-printer.glade, 
	system-config-printer.py (GUI.on_btnPrintTestPage_clicked): 
	Print test page button

2006-06-26  Tim Waugh  <twaugh@redhat.com>

	* po/POTFILES.in: Include the glade file.
	* po/Makevars: Bugzilla for reporting bugs.
	* system-config-printer.glade: Some translatable="no" fixes.

2006-06-25  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_btnNPApply_clicked): Set
	newly-created queue enabled and accepting jobs.

	* cupshelpers.py: Strings marked for translation.

2006-06-23  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.17.

2006-06-23  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_tvNPDrivers_cursor_changed):
	Provide PPD information.
	(GUI.busy, GUI.ready): New cursor functions.
	(GUI.on_entSMBURI_changed): Check whether to ignore this signal.
	(GUI.on_tvSMBBrowser_cursor_changed): Suppress signals from
	entSMBURI when we set its text.
	(GUI.on_btnSMBVerify_clicked): Implemented.
	(GUI.initNewPrinterWindow): Grab focus after setting text, so that
	it is highlighted.

2006-06-23  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.16.

2006-06-23  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.fillDeviceTab): Filter out
	hpfax:/no_device_found.
	(GUI.construct_SMBURI): New function.
	(GUI.on_tvSMBBrowser_cursor_changed): Use it.
	(GUI.fillNPApply): Don't reveal SMB authentication details.
	(GUI.initNewPrinterWindow): Clear out SMB screen.

2006-06-22  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI): Show SMB tab.
	(GUI.initNewPrinterWindow): Set up SMB browser columns.
	(GUI.on_tvSMBBrowser_row_activated): New function, ported from
	printconf.
	(GUI.on_tvSMBBrowser_row_expanded): Likewise.
	(GUI.on_tvSMBBrowser_select_cursor_row): New function.
	(GUI.getDeviceURI): Use constructed SMB URI.
	(GUI.nextNPTab): Load foomatic after getting the new queue name.
	This way the dialog appears as soon as you click 'New'.
	(GUI.on_btnSMBVerify_clicked): Added 'Verify' button.

	* pysmb.py: New file, imported from printconf.

2006-06-22  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.15.

2006-06-21  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py (Foomatic.getPrinterFromCupsDevice): Best matching.

	* system-config-printer.py (GUI.on_tvNPDevices_cursor_changed):
	Select make based on the selected device.

	* system-config-printer.py: Copyright and license header.
	* cupshelpers.py: Likewise.
	* foomatic.py: Likewise.
	* gtk_html2pango.py: Likewise.
	* nametree.py: Likewise.
	* options.py: Likewise.
	* optionwidgets.py: Likewise.
	* probe_printer.py: Likewise.

	* system-config-printer.py (GUI.show_IPP_Error): Tidied
	translatable strings.

	* po/*.po: msgmerged from printconf.

2006-06-20  Tim Waugh  <twaugh@redhat.com>

	* configure.in: Version 0.7.14.

2006-06-20  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (Device.__cmp__): Fixed device sorting.

	* foomatic.py (Foomatic._write_pickle): Fixed typo.

	* Makefile.am: Ship config.py.

	* configure.in: Generate config.py.

	* config.py.in: New file, for any autoconf-generated variables
	such as VERSION.

	* system-config-printer.py (connect, main): Use gtk.gdk.threads_enter,
	because gtk.threads_enter is deprecated.
	(GUI.__init__): Set up "About" dialog strings (bug #192764).

2006-06-19  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.13.

2006-06-19  Tim Waugh  <twaugh@redhat.com>

	* Makefile.am: Added automake infrastructure.

	* foomatic.py (_write_pickle, _load_pickle): Don't use /tmp, even as
	a default.

	* po/*: Added i18n infrastructure using gettextize.

2006-06-09  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.12.

2006-06-09  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (PrintersConf.parse): Handle empty lines in
	printers.conf (bug #194217).

2006-06-01  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.on_btnNPApply_clicked): Fixed
	typo.

2006-05-31  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.11.

2006-05-30  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.getDeviceURI): Use correct widget
	names (bug #192764).

2006-05-26  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.10.

2006-05-26  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Set 'Job options' help text.

	* system-config-printer.py (GUI.__init__): Grab
	entNPTDirectJetHostname and entNPTDirectJetPort widgets from the
	XML (bug #192764).
	(GUI.getDeviceURI): Use them.

2006-05-25  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.9.

2006-05-25  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (PrintersConf.fetch): Handle IPP errors
	somewhat gracefully.

	* system-config-printer.py (GUI.__init__): Don't assume all LC_*
	variables are set to the same locale (bug #192807).

2006-05-18 Florian Festi  <ffesti@redhat.com>
	* cupshelpers.py (Printer._getAttributes): filter out "notify-events"
	because it is not (yet) supported by cups
	* foomatic.py (Foomatic.getPPD): new method used by new hal_lpadmin
	* system-config-printer.glade, system-config-printer.py 
	(GUI.on_btnRefresh_clicked): Refresh button

2006-05-17  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.connect): Turns out we need to set
	the password callback again when we start a new thread.

2006-05-16  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.removeOption_clicked): Actually
	remove the option from our list.
	(GUI.save_printer): Fixed debugging code.

2006-05-15  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.8.

2006-05-15 Florian Festi  <ffesti@redhat.com>
	* cupshelpers.py (Printer._getAttributes): Support more job options
	* system-config-printer.py: refining interface for job options
	
2006-05-05  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Ship options.py.

2006-05-04  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.7.

2006-05-04  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.desktop: New file.

2006-05-04 Florian Festi  <ffesti@redhat.com>
	* system-config-printer.py(GUI.fillPrinterTab, GUI.save_printer,
	GUI.add_option, ...) Support for job options
	
2006-04-28  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.6.

2006-04-28  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py: Make it actually run.

2006-04-20  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.5.

2006-04-20 Florian Festi  <ffesti@redhat.com>
	* system-config-printer.py (GUI.fillServerTab, 
	GUI.save_serversettings, GUI.on_server_changed): Handle server settings

2006-04-14  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py: Exit gracefully when DISPLAY is not
	set, and when '--help' is given (bug #168485).

2006-04-12  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.4.

2006-04-09  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.fillNPApply): Fill in name and
	uri.
	(GUI.loadFoomatic): New function to load foomatic database (and
	get CUPS PPDs) on demand, since this is an expensive process.
	(GUI.unloadFoomatic): New function.
	(GUI.on_connect_activate): Unload foomatic.
	(GUI.on_new_printer_activate): Load foomatic.
	(GUI.on_btnSelectDevice_clicked): Likewise.
	(GUI.on_btnChangePPD_clicked): Likewise.

2006-04-07  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.3.

2006-04-07  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Packaging fixes.

2006-04-07  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.2.

2006-04-06 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.py (GUI.on_connect_activate, connect):
	Open connection to cups server in a new thread to avoid GUI freeze
	* system-config-printer.glade (ConnectingDialog): Shown while 
	connection to server

	* system-config-printer.py (GUI.save_printer, ...) Do error
	handling when communicationg with cups server.

	* system-config-printer.py (...) make GUI strings translatable
	
	* foomatic.py (copyPPDOptions): Migrate options settings between PPDs

	* foomatic.py (FoomaticXMLFile.getLangComment): search for language 
	fammilies
	
	* foomatic.py: "Generic Raw" printer for raw queues

	* system-config-printer.glade (NewPrinterDialog): Tab for applying 
	new PPD: Ask copy option settings or not?

	* system-config-printer.glade Commented out Server setting tab, allow
	no printer is selected, support not connected to cups server

2006-03-27 Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.__init__): Always set
	self.conflicts, to prevent tracebacks in self.setDataButtonState()
	later.

2006-03-27 Florian Festi  <ffesti@redhat.com>
	* system-config-printer.glade, system-config-printer.py:
	New tab for Access Control, list with add/remove buttons for 
	user handling

2006-03-25 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.glade, system-config-printer.py 
	(NewPrinterDialog): Reuse NewPrinterDialog for changing Device
	and PPD
	
2006-03-23 Florian Festi  <ffesti@redhat.com>
	
	* system-config-printer.glade (NewPrinterDialog)
	* system-config-printer.py (GUI): Redesigned PPD selection, added
	filechooser for providing own PPDs

	* gtk_label_autowrap.py: online fix for multiline gtk.Label to force
	adjustion to size changes

	* gtk_html2pango.py (HTML2PangoParser)
	* foomatic.py (FoomaticXMLFile): Convert HTML to pango markup
	
2006-03-20 Florian Festi  <ffesti@redhat.com>	

	* system-config-printer.glade (MainWindow)
	* system-config-printer.py: Removed Server CmbBox in Toolbar, make 
	Connect Window default to server of currently selected Printer.

	* system-config-printer.glade (NewPrinterDialog)
	* system-config-printer.py (GUI.fillNewClassMembers, 
	GUI.on_btnNC(Add|Del)Member_clicked): Change member handling in new 
	class dialog to the same way as the main window

	* system-config-printer.glade (NewPrinterName)
	* system-config-printer.py (GUI.save_printer): Copy printers and 
	classes
	

2006-03-17 Florian Festi  <ffesti@redhat.com>	

	* foomatic.py (Foomatic._add_printer): fixed bug: used printer.name
	insted of printer.model as keys in self.makes[make][model]

	* system-config-printer.glade (NewPrinterDialog): Visual improvements

	* system-config-printer.glade
	* system-config-printer.py (printer data handling): Changed Allow/Deny
	from ToggleButton to ComboBox

	* foomatic.py (Foomatic._load_pickle): If there are files with 
	newer mtime and discard pickle

	* system-config-printer.py (GUI.fillClassMembers): Support remote
	Printers as class members
	
	* system-config-printer.glade
	* system-config-printer.py: NewPrinterDialog also supports new classes 

2006-03-17  Tim Waugh  <twaugh@redhat.com>

	* foomatic.py: No need to adjust sys.path.

2006-03-16  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.1 (packaging test).

2006-03-16  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Don't forget to ship the glade files.

2006-03-16  Tim Waugh  <twaugh@redhat.com>

	* Makefile: Version 0.7.0 (for testing).

2006-03-16  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (pkgdata): Prepare for packaging.
	(GUI.fillPrinterOptions): Remove temporary file.
	(GUI.on_tvMainList_cursor_changed): Place-holder for handling
	remote queues that no longer exist.
	(GUI.fillPrinterOptions): Place-holder for handling raw queues.
	(GUI.initNewPrinterWindow): Better initialization.

2006-03-15  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.py (GUI.__init__): Fetch entNPTDevice
	widget.

	* foomatic.py (Foomatic.getPrinters): Use glob for this, so we
	only pick up XML files.  Foomatic has shipped DTD files here in
	the past, and may again.
	(Foomatic.getDrivers): Likewise.

2006-03-15 Florian Festi  <ffesti@redhat.com>	

	* foomatic.py (Foomatic.__init__): pickle printers' make, 
	model, name to disk
	* system-config-printer.glade, 
	* system-config-printer.py (GUI.fillPPDList): GUI for selecting 
	printers and drivers (no "give PPD file" yet)
	* system-config-printer.py (GUI.fillDeviceTab,
	GUI.on_cmbNPType_changed, GUI.getDeviceURI): 
	Use cups.Connection.getDevices() for DeviceURI GUI

2006-03-14  Tim Waugh  <twaugh@redhat.com>

	* cupshelpers.py (Printer.setShared): setPrinterPublished changed
	to setPrinterShared.

2006-03-14 Florian Festi  <ffesti@redhat.com>	
	* probe_printer.py: First code for probing queue names on remote 
	printers/printing servers.
	
	* cupshelpers.py (Printer._getAttributes): Read CUPS printer attributes
	* cupshelpers.py (Printer.set*): Methods for setting CUPS attributes
	* system-config-printer.glade: New tab for CUPS printer attributes
	* system-config-printer.py (GUI.fillPrinterTab, GUI.save_printer,
	GUI.on_printer_changed, GUI.on_tbtnPAllow_changed, 
	GUI.on_entPExceptUsers_changed): Handle CUPS printer attributes
	
2006-03-10 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.py (GUI.__init__, GUI.populateList):
	Make main list a tree (remote/local printers/classes)

2006-03-09 Florian Festi  <ffesti@redhat.com>

	* cupshelpers.py (Printer.__init__): save cups.Connection within 
	Printer object
	* cupshelpers.py (Printer.set*): Methods for setting printer 
	enabled/disabled, accepting/rejecting, shared
	* system-config-printer.py (GUI.fillPrinterTab, GUI.savePrinter):
	support for the settings above

	* system-config-printer.glade: signals for printer settings 
	* system-config-printer.py (GUI.on_printer_changed) keep track if 
	printer settings got changed

	* system-config-printer.py (GUI.fillPrinterTab, GUI.fillServerTab,
	GUI.setCmbServers): fast goto server feature

	* system-config-printer.glade, system-config-printer.py 
	(GUI.fillPrinterOptions): polished MainWindow

	* system-config-printer.py (GUI.fillPrinterOptions)
	* optionswidgets.py (Option.__init__, Option.checkConflicts)
	* system-config-printer.py (GUI.fillPrinterOptions):
	Made conflict icon a button 
	
2006-03-08 Florian Festi  <ffesti@redhat.com>

	* cupshelpers.py:
	new Printer class, cups.Connection.getPrinters() replacement
	* system-config-printer.py (GUI.fill*, GUI.save_printer):
	change printers to new Printer class	

	* system-config-printer.py (GUI.fill*): don't allow changes 
	to remote printers
	
2006-03-07 Florian Festi  <ffesti@redhat.com>

	* system-config-printer.glade: Tab for members of printer classes 
	* system-config-printer.py (GUI.fill*, GUI.save_printer, ...): 
	support for printer classes
	
2006-03-06 Florian Festi  <ffesti@redhat.com>

	* optionswidgets.py (Option.__init__, Option.checkConflicts):
	Conflict handling
	* system-config-printer.py (GUI.fillPrinterTab) Calculate conflicts,
	add conflict icons to table
	* system-config-printer.py (GUI.option_changed, 
	GUI.setDataButtonState): disable Apply and Revert buttons on 
	conflicts and show Error icon

	* system-config-printer.py (GUI.on_btnApply*_clicked):
	ApplyDialog
	* system-config-printer.py (GUI.on_quit_activate, 
	GUI.on_tvMainList_cursor_changed, GUI.on_connect_activate):
	Run ApplyDialog if there are unapplied changes 

2006-03-03  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Make error dialog label selectable.

	* system-config-printer.py (GUI.on_btnApply_clicked): Some
	error-checking.

	* system-config-printer.glade: New ErrorDialog.

	* system-config-printer.py (GUI.cupsPasswdCallback): Set query
	label.
	(GUI.cupsPasswdCallback): Set transient for main window.
	(GUI.on_btnApply_clicked): Only set PPD options if they have
	changed.

	* system-config-printer.glade: Better PasswordDialog layout.

	* optionwidgets.py (Option.__init__): End option labels with ':'.

	* system-config-printer.py (GUI.fillPrinterTab): HIG spacing
	between labels and widgets.

2006-03-02  Tim Waugh  <twaugh@redhat.com>

	* system-config-printer.glade: Use a Dialog for
	Connect... dialog.
	* system-config-printer.py (GUI.on_connect_activate): Run the dialog.

	* optionwidgets.py (OptionBool.__init__): Use CheckButton's
	built-in label.

	* system-config-printer.py (GUI.fillPrinterTab): Textual
	printer-state description.
	(GUI.fillPrinterTab): More consistent layout.

	* system-config-printer.glade: Added 'items' property to
	cmbServername.

	* system-config-printer.py (GUI.on_connect_activate): Populate
	server-name combo-box from browsed queues.
	
